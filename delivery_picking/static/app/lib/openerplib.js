var openerplib={};openerplib.json_rpc=function(b,g,d,i,j){var e={jsonrpc:"2.0",params:d,id:Math.floor((Math.random()*1000000000)+1)};if(g){e.method=g}var h=new XMLHttpRequest();h.open("POST",b,true);if(j){if(j.timeout){h.timeout=j.timeout}}var f=false;var a=function(l,k){if(!f){f=true;if(i){i(l,k)}}};h.setRequestHeader("Content-Type","application/json");h.onreadystatechange=function(){if(h.readyState==4){var l=h.getResponseHeader("Content-Type");if(h.status!==200){a({name:"Offline",message:"Server is offline"},null)}else{if(l.indexOf("application/json")!==0){a({name:"Invalid Response",message:'Expected JSON encoded response, found "'+l+'"'},null)}else{var k=JSON.parse(this.responseText);a(k.error||null,k.result||null)}}}};h.ontimeout=function(){a({name:"Timeout",message:"Request not answered"},null)};try{h.send(JSON.stringify(e))}catch(c){setTimeout(function(){a(c,null)},0)}};openerplib.Service=function(b,a){var c=this;this.con=b;this.service=a;this.exec=function(f,d,e){c.con.send(c.service,f,d,e)}};openerplib.Model=function(a,c){var b=this;this.service=new openerplib.Service(a,"object");this.con=a;this.model=c;this.exec=function(g,d,e,f){b.service.exec("execute_kw",[a.database,a.user_id,a._password,b.model,g,d,e],f)}};openerplib.JsonRPCConnector=function(e,f,c,d,a){var b=this;this._url=e;this._url_jsonrpc=e+"/jsonrpc";this._password=d;this.login=c;this.database=f;this.user_id=a;this.session_id=null;this.user_context=null;this.authenticate=function(i){var h={db:b.database,login:b.login,password:b._password};var g=b._url+"/web/session/authenticate";openerplib.json_rpc(g,null,h,function(k,j){if(k===null){b.session_id=j.session_id;b.user_id=j.uid;b.user_context=j.user_context}if(i){i(k,j)}})};this.send=function(h,j,g,i){openerplib.json_rpc(b._url_jsonrpc,"call",{service:h,method:j,args:g},i)};this.get_service=function(g){return new openerplib.Service(b,g)};this.get_model=function(g){return new openerplib.Model(b,g)}};openerplib.get_connection=function(e,g,b,f,a,d){if(!b){b=8069}var c=e+":"+b.toString();switch(g){case"jsonrpcs":c="https://"+c;break;default:c="http://"+c;break}return new openerplib.JsonRPCConnector(c,f,a,d,null)};